<?php
require_once __DIR__ . '/vendor/autoload.php';
$dotenv = Dotenv\Dotenv::createImmutable(__DIR__);
$dotenv->safeLoad();
require_once __DIR__ . '/src/Core/Database.php';
use App\Core\Database;

$names = [
    'เงินเดือน', 'เงินเดือนและค่าตอบแทนประจำ',
    'เงินหรือที่เรียกเป็นอย่างอื่น', 'อัตราเงินเดือนและค่าจ้าง',
    'อัตราเดิม', 'อัตราเงินเดือนเดิม',
    'อัตราใหม่', 'อัตราเงินเดือนใหม่',
    'เงินอื่นที่จ่ายควบกับเงินเดือน', 'เงินเพิ่ม ค่าตอบแทนพิเศษอื่นๆ',
    'เงินประจำตำแหน่ง รวม', 'เงินประจำตำแหน่งทุกประเภท',
    'ค่าตอบแทนเท่ากับเงินประจำตำแหน่ง', 'ค่าตอบแทนตำแหน่งต่างๆ',
    'เงินช่วยเหลือการครองชีพข้าราชการระดับต้น', 'เงินช่วยเหลือการครองชีพ',
    'เงิน พ.ต.ก.', 'เงินเพิ่มตำแหน่งที่มีเหตุพิเศษของขรก.พลเรือน (ผู้ปฏิบัติงานด้านนิติกร)',
    'เงิน พ.พ.ด.', 'เงินเพิ่มพิเศษสำหรับผู้ปฏิบัติงานด้านพัสดุ',
    'เงิน พ.ส.ร.', 'เงินเพิ่มพิเศษสำหรับการสู้รบ',
    'เงิน สปพ.', 'เงินสวัสดิการสำหรับการปฏิบัติงานประจำสำนักงานในพื้นที่พิเศษ',
    'ค่าจ้างประจำ', 'ค่าจ้างประจำและค่าตอบแทนอื่นๆ',
    'ค่าตอบแทนพิเศษเงินเดือนเต็มขั้น', 'ค่าตอบแทนพิเศษเงินเดือนเต็มขั้น',
    'ค่าตอบแทนพิเศษรายเดือนให้แก่เจ้าหน้าที่ผู้ปฏิบัติงานในพื้นที่จังหวัดชายแดนภาคใต้', 'ค่าตอบแทนพิเศษสำหรับจังหวัดชายแดนภาคใต้',
    'ค่าใช้จ่าย', 'ค่าใช้จ่ายต่างๆ',
    'เงินสมทบกองทุนประกันสังคม', 'เงินสมทบกองทุนเงินทดแทน'
];

$placeholders = implode(',', array_fill(0, count($names), '?'));
// Also search for these exact names
$sql = "SELECT id, category_id, item_name, level, is_header 
        FROM budget_category_items 
        WHERE item_name IN ($placeholders)
        AND is_active = 1
        ORDER BY item_name";

try {
    $items = Database::query($sql, $names);
    echo "ID | Name | Level | Header\n";
    echo "---|---|---|---\n";
    foreach ($items as $item) {
        echo sprintf("%d | %s | %d | %d\n", $item['id'], $item['item_name'], $item['level'], $item['is_header']);
    }
} catch (Exception $e) {
    echo "Error: " . $e->getMessage();
}
