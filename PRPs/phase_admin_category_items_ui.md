# Phase: Admin UI for Budget Category Items

**à¸§à¸±à¸™à¸—à¸µà¹ˆ**: 2025-12-29  
**Status**: ğŸŸ¡ Planning  
**Priority**: High  
**Depends on**: Phase Expense Hierarchy Schema (âœ… Complete)

---

## ğŸ“‹ Overview

à¸ªà¸£à¹‰à¸²à¸‡ Admin UI à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¸£ Budget Category Items à¸‹à¸¶à¹ˆà¸‡à¹€à¸›à¹‡à¸™ Hierarchy à¸‚à¸­à¸‡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“ à¸£à¸­à¸‡à¸£à¸±à¸š:
- à¹à¸ªà¸”à¸‡à¹€à¸›à¹‡à¸™ Tree View
- CRUD (Create, Read, Update, Delete)
- Soft Delete & Restore
- Toggle Active/Inactive
- Sort Order

---

## ğŸ¯ Goals

1. Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£ Category Items à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸™à¸£à¸¹à¸›à¹à¸šà¸š Tree
2. Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡/à¹à¸à¹‰à¹„à¸‚/à¸¥à¸š Category Items
3. Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸´à¸”/à¹€à¸›à¸´à¸”à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ (toggle active)
4. Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸¹à¹‰à¸„à¸·à¸™ items à¸—à¸µà¹ˆà¸–à¸¹à¸à¸¥à¸š (soft delete)
5. Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¸ˆà¸±à¸”à¸¥à¸³à¸”à¸±à¸šà¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥ (sort order)

---

## ğŸ“ Files to Create/Modify

### Backend

| Action | File | Description |
|--------|------|-------------|
| **NEW** | `src/Controllers/AdminBudgetCategoryItemController.php` | Controller à¸ªà¸³à¸«à¸£à¸±à¸š CRUD |
| **MODIFY** | `routes/web.php` | à¹€à¸à¸´à¹ˆà¸¡ routes à¸ªà¸³à¸«à¸£à¸±à¸š `/admin/category-items` |

### Frontend

| Action | File | Description |
|--------|------|-------------|
| **NEW** | `resources/views/admin/category-items/index.php` | à¸«à¸™à¹‰à¸² List à¹à¸šà¸š Tree View |
| **NEW** | `resources/views/admin/category-items/form.php` | Form Create/Edit |

---

## ğŸ›£ï¸ Routes

```php
// Admin - Budget Category Items
Router::get('/admin/category-items', [AdminBudgetCategoryItemController::class, 'index']);
Router::get('/admin/category-items/create', [AdminBudgetCategoryItemController::class, 'create']);
Router::post('/admin/category-items/store', [AdminBudgetCategoryItemController::class, 'store']);
Router::get('/admin/category-items/{id}/edit', [AdminBudgetCategoryItemController::class, 'edit']);
Router::post('/admin/category-items/{id}/update', [AdminBudgetCategoryItemController::class, 'update']);
Router::post('/admin/category-items/{id}/delete', [AdminBudgetCategoryItemController::class, 'destroy']);
Router::post('/admin/category-items/{id}/restore', [AdminBudgetCategoryItemController::class, 'restore']);
Router::post('/admin/category-items/{id}/toggle', [AdminBudgetCategoryItemController::class, 'toggleActive']);
```

---

## ğŸ”§ Controller Methods

### AdminBudgetCategoryItemController

| Method | Description |
|--------|-------------|
| `index()` | à¹à¸ªà¸”à¸‡ Tree View à¸‚à¸­à¸‡ Category Items à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” |
| `create()` | à¹à¸ªà¸”à¸‡ Form à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¸¡à¹ˆ |
| `store()` | à¸šà¸±à¸™à¸—à¸¶à¸ Item à¹ƒà¸«à¸¡à¹ˆ |
| `edit($id)` | à¹à¸ªà¸”à¸‡ Form à¹à¸à¹‰à¹„à¸‚ |
| `update($id)` | à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚ |
| `destroy($id)` | Soft Delete |
| `restore($id)` | Restore à¸ˆà¸²à¸ Soft Delete |
| `toggleActive($id)` | Toggle is_active |

---

## ğŸ¨ UI Design

### Index Page (Tree View)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‚ à¸ˆà¸±à¸”à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢                      [+ à¹€à¸à¸´à¹ˆà¸¡à¹ƒà¸«à¸¡à¹ˆ]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¸–à¸¹à¸à¸¥à¸š                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name                    â”‚ Code  â”‚ Level â”‚ Status â”‚ Actions     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¼ à¸‡à¸šà¸šà¸¸à¸„à¸¥à¸²à¸à¸£             â”‚ 01    â”‚ 0     â”‚ âœ…     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â”‚   â”œâ”€ à¹€à¸‡à¸´à¸™à¹€à¸”à¸·à¸­à¸™          â”‚ 0101  â”‚ 1     â”‚ âœ…     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â”‚   â””â”€ à¸„à¹ˆà¸²à¸ˆà¹‰à¸²à¸‡à¸›à¸£à¸°à¸ˆà¸³       â”‚ 0102  â”‚ 1     â”‚ âœ…     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â”‚ â–¼ à¸‡à¸šà¸”à¸³à¹€à¸™à¸´à¸™à¸‡à¸²à¸™           â”‚ 02    â”‚ 0     â”‚ âœ…     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â”‚   â”œâ”€ à¸„à¹ˆà¸²à¸•à¸­à¸šà¹à¸—à¸™          â”‚ 0201  â”‚ 1     â”‚ âœ…     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â”‚   â”‚   â””â”€ à¸„à¹ˆà¸²à¸•à¸­à¸šà¹à¸—à¸™à¸à¸´à¹€à¸¨à¸© â”‚ 020101â”‚ 2     â”‚ âšª     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â”‚   â””â”€ à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ªà¸­à¸¢          â”‚ 0202  â”‚ 1     â”‚ âœ…     â”‚ âœï¸ ğŸ—‘ï¸ âš¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Legend:**
- âœï¸ = Edit
- ğŸ—‘ï¸ = Delete (Soft)
- âš¡ = Toggle Active
- âœ… = Active
- âšª = Inactive

### Form Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ à¹€à¸à¸´à¹ˆà¸¡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹ƒà¸«à¸¡à¹ˆ                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ à¸Šà¸·à¹ˆà¸­ *          [________________________________]              â”‚
â”‚ à¸£à¸«à¸±à¸ª *          [________]                                      â”‚
â”‚ à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹à¸¡à¹ˆ     [â–¼ à¹€à¸¥à¸·à¸­à¸à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹à¸¡à¹ˆ (à¸§à¹ˆà¸²à¸‡à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™ Root)]        â”‚
â”‚ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢        [________________________________]              â”‚
â”‚ à¸¥à¸³à¸”à¸±à¸š           [___0___]                                       â”‚
â”‚ â˜‘ à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™                                                    â”‚
â”‚                                                                 â”‚
â”‚                              [à¸¢à¸à¹€à¸¥à¸´à¸]  [ğŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Verification Plan

1. **à¹€à¸‚à¹‰à¸²à¸«à¸™à¹‰à¸² List**: `/admin/category-items` â†’ à¸•à¹‰à¸­à¸‡à¹à¸ªà¸”à¸‡ Tree 86 items
2. **à¹€à¸à¸´à¹ˆà¸¡ Root Item**: à¸ªà¸£à¹‰à¸²à¸‡ Item à¹„à¸¡à¹ˆà¸¡à¸µ Parent â†’ à¸•à¹‰à¸­à¸‡à¸­à¸¢à¸¹à¹ˆà¸£à¸°à¸”à¸±à¸š 0
3. **à¹€à¸à¸´à¹ˆà¸¡ Child Item**: à¸ªà¸£à¹‰à¸²à¸‡ Item à¸¡à¸µ Parent â†’ à¸•à¹‰à¸­à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸•à¹‰ Parent
4. **à¹à¸à¹‰à¹„à¸‚ Item**: à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸Šà¸·à¹ˆà¸­/Parent â†’ à¸•à¹‰à¸­à¸‡ Update
5. **Toggle Active**: à¸„à¸¥à¸´à¸ Toggle â†’ Status à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™
6. **Soft Delete**: à¸¥à¸š Item â†’ à¸«à¸²à¸¢à¸ˆà¸²à¸ List (à¸–à¹‰à¸²à¹„à¸¡à¹ˆ tick à¹à¸ªà¸”à¸‡à¸—à¸µà¹ˆà¸¥à¸š)
7. **Restore**: à¸à¸¹à¹‰à¸„à¸·à¸™ Item â†’ à¸à¸¥à¸±à¸šà¸¡à¸²à¹à¸ªà¸”à¸‡

---

## ğŸ“ Notes

- à¹ƒà¸Šà¹‰ Model `BudgetCategoryItem` à¸—à¸µà¹ˆà¸¡à¸µ methods à¸à¸£à¹‰à¸­à¸¡à¹à¸¥à¹‰à¸§
- à¸•à¹‰à¸­à¸‡à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š `Database::execute()` method à¸§à¹ˆà¸²à¸¡à¸µà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
- UI Style à¹ƒà¸Šà¹‰à¸•à¸²à¸¡à¹à¸šà¸š Admin pages à¸­à¸·à¹ˆà¸™à¹† (categories, organizations)

---

**End of PRP**
